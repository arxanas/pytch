[![Build Status](https://travis-ci.org/pytch-lang/pytch.svg?branch=master)](https://travis-ci.org/pytch-lang/pytch)

## Development

### Setup

The Pytch compiler is currently written in Python 3.7.

To install the development environment, run

```sh
$ poetry install
```

### Running

To launch the REPL:

```sh
$ poetry run pytch repl
```

To execute a file as a Pytch script:

```sh
$ poetry run pytch run file.pytch
```

### Changes checklist

When making a change to the language, make sure that all of the following areas of the codebase have been updated:

  - [ ] Lexer
  - [ ] Parser
  - [ ] Binder
  - [ ] Codegen
  - [ ] Typechecker
  - [ ] Syntax highlighters
  - [ ] Refactorings
  - [ ] Documentation
  - [ ] Changelog

### Updating the syntax trees

To modify the syntax tree node types, update `pytch/syntax_tree.txt`, then run
`make`.

### Updating the documentation

To update the documentation, change the appropriate file in `website` (not
`docs` -- that's autogenerated!), then run `make` to rebuild the website. If you
made certain website-wide changes, such as modifying the CSS, you may have to
run `make clean` first.

### Fuzzing the parser

To run the fuzzer on the Pytch parser, first be sure that [the AFL
fuzzer][afl-fuzz] is installed (e.g. with `brew install afl-fuzz`). Next,
install the fuzzing dependencies:

  [afl-fuzz]: http://lcamtuf.coredump.cx/afl/

```sh
$ poetry install --extras fuzz
```

Then you can run:

```sh
$ ./bin/fuzz.sh
```
